<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>store-management.com</title>
    <link href="/home/rohann/html/store-management/font/fontawesome-free-6.1.1-web/css/all.css" rel="stylesheet">
    <link href="style.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
</head>

<body>
    <div class="header">
        <h1>Store Management</h1>
    </div>

    <div class="container" id="container">
        <div class="side-bar">
            <ul>
                <li>
                    <h3 class="newInvoice" :class="{'is-active':selectedTab === 'invoicePage'}"
                        @click="createInvoice">Create new invoice</h3>
                </li>
                <li>
                    <h3 class="viewSales" :class="{'is-active':selectedTab === 'totalSalesPage'}"
                        @click="selectedTab = 'totalSalesPage'">View total sales</h3>
                </li>
                <li>
                    <h3 class="viewInvoices" :class="{'is-active':selectedTab === 'allInvoicesPage'}"
                        @click="selectedTab = 'allInvoicesPage'">View all invoices</h3>
                </li>
            </ul>
        </div>

        <div class="home" v-if="selectedTab === 'homePage'">
            <i class="fa-solid fa-shop"></i>
            <h2>Welcome to</h2>
            <h2>Store Management App</h2>
        </div>

        <!-- create new invoice -->

        <div class="invoice" v-if="selectedTab === 'invoicePage'">

            <div class="invoice-header">
                <h2>Invoice</h2>
                <input type="submit" value="Add item" class="button" @click="selectedTab = 'inputPage'">
            </div>

            <div class="empty-lineItem" v-if="currentInvoice.lineItems.length === 0">
                <h2>Invoice is <span>Empty</span>!!! Add items...</h2>
            </div>

            <div class="item-div" v-else>
                <line-items-table v-bind:items="currentInvoice.lineItems" v-on:on-delete-pressed = "removeItem"></line-items-table>

                <div class="view-total">
                    <h3>Total Amount: ${{ currentInvoice.amountWithTax }}</h3>
                    <input type="submit" value="Checkout" class="button"
                        @click="submitInvoice">
                </div>
            </div>

            <!-- <div class="popup" v-if="selectedTab ==='deletionPrompt'">
                <div class="popup-delete">
                    <h3>Are you sure you want to delete this item?</h3>
                    <div class="button-row">
                        <button class="button" @click="selectedTab='invoicePage'">No</button>
                        <button class="button1" @click="selectedTab='invoicePage'">Yes</button>
                    </div>
                </div>
            </div> -->

        </div>

        <!-- receive input form -->

        <div class="input-form" v-if="selectedTab==='inputPage'">
            <input-form v-model:invoice="currentInvoice" v-on:on-item-added = "selectedTab ='invoicePage'"></input-form>
        </div>

        <!-- invoice completed -->

        <div class="popup" v-if="selectedTab==='isInvoiceCompleted'">
            <div class="popup-container">
                <h2>Your total is ${{ currentInvoice.amountWithTax }}.</h2>
                <h2>Thanks for shopping.</h2>
                <button class="button" @click="clearInvoice">Done</button>
            </div>
        </div>

        <!-- view total sales -->
        <div class="view-total-sales" v-if="selectedTab==='totalSalesPage'">
            <h1>Total Sales</h1>
            <h2>Total number of invoices: {{ invoices.length }}</h2>
            <h2>Total Sales: ${{ totalAmountWithTax }}</h2>
            <h2>Total Tax: ${{ totalTax }}</h2>
            <h2>Total Revenue: ${{ totalAmount }}</h2>
        </div>

        <!-- view all invoices -->

        <div class="view-all-invoices" v-if="selectedTab==='allInvoicesPage'">
            <div class="invoice-header">
                <h2>All Invoices</h2>
            </div>

            <div class="empty-lineItem" v-if="invoices.length === 0">
                <h2>No invoices added yet!!!</h2>
            </div>

            <invoices-page v-else v-bind:invoices="invoices"></invoices-page>
        </div>
    </div>

    <script src="./vue.js"></script>
</body>

</html>